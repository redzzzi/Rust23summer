# ğŸ“œ 09 Error Handling
[panic!](#1-unrecoverable-errors-with-panic)&emsp;[Result](#2-recoverable-errors-with-result)&emsp;[panic!â­•âŒ](#3-to-panic-or-not-to-panic)
<br><br>

## 1. Unrecoverable Errors with panic!ğŸ¤¯

### ```panic!```
* íŒ¨ë‹‰ì´ ë°œìƒí•˜ë©´ í”„ë¡œê·¸ë¨ì€ ë§ì€ ì¼ì„ í•¨ (ì‹¤íŒ¨ ë©”ì‹œì§€ ì¶œë ¥ â†’ ìŠ¤íƒ ë˜ê°ê³  ì²­ì†Œí•˜ê¸° â†’ ì¢…ë£Œ)
* ì•„ë˜ ì„¤ì •ì„ í†µí•´ *ê·¸ë§Œë‘ê¸°*ë¥¼ ì„¤ì •í•˜ì—¬ ```build``` ì‹œì— ë˜ê°ê¸°ê°€ ì•„ë‹Œ ê·¸ë§Œë‘ê¸°ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŒ
  <br>

  ```rust
  // Cargo.toml íŒŒì¼ ì¶”ê°€ ë‚´ìš©
  [profil.release]
  panic = 'abort'
  ```
  <img src="https://github.com/redzzzi/Rust23summer/assets/127263392/5c225a1f-1bde-47c1-ac6b-2234bd8a5c30" width="700px"><br>
    * panic! ë°œìƒí•œ ë¶€ë¶„ì— ëŒ€í•œ ì„¤ëª…ì´ ìˆìŒ
---
### panic! ë°±íŠ¸ë ˆì´ìŠ¤ ì‚¬ìš©
* *backtrace*: ì–´ë–¤ ì§€ì ì— ë„ë‹¬í•˜ê¸°ê¹Œì§€ í˜¸ì¶œí•´ì˜¨ ëª¨ë“  í•¨ìˆ˜ì˜ ë¦¬ìŠ¤íŠ¸
* ```RUST_BACKTRACE=1 cargo run``` ëª…ë ¹ì–´ë¥¼ í†µí•´ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¨ ì§€ì ì„ ìˆœì„œëŒ€ë¡œ ì°¾ì•„ê°ˆ ìˆ˜ ìˆìŒ
<br>

## 2. Recoverable Errors with Result
ğŸ’¡ [2ì¥] ```Result``` ì—´ê±°í˜•ì€ ```Ok```ì™€ ```Err``` ë‘ variantë¥¼ ê°–ëŠ”ë‹¤ğŸ’¡

### ```File::open``` í•¨ìˆ˜
* ë°˜í™˜ íƒ€ì„: ```Result<T, E>```
* íŒŒì¼ ì—´ê¸° ì½”ë“œ
  <br>

  ```rust
  use std::fs::File;

  fn main() {
      let f = File::open("hello.txt");
  }
  ```
* ```match``` í‘œí˜„ì‹ì„ ì´ìš©í•˜ì—¬ ```Result``` ì²˜ë¦¬í•˜ê¸°
  <br>

  ```rust
  use std::fs::File;

  fn main() {
      let f = File::open("hello.txt");
  
      let f = match f {
          Ok(file) => file,  // File::openì´ ì„±ê³µí•˜ì—¬ Ok ì¸ìŠ¤í„´ìŠ¤ ì „
          Err(error) => {
              panic!("There was a problem opening the file: {:?}", error)
          },
      };
  }
  ```
  ```rust
  // hello.txt íŒŒì¼ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
  thread 'main' panicked at 'There was a problem opening the file: Os { code: 2, kind: NotFound, message: "No such file or directory" }', src/main.rs:9:13
  ```
<br>

### ì„œë¡œ ë‹¤ë¥¸ ì—ëŸ¬ì— ëŒ€í•´ ë§¤ì¹­
```rust
use std::fs::File;
use std::io::ErrorKind;

fn main() {
    let f = File::open("hello.txt");  // íŒŒì¼ ì—´ê¸° ì‹œë„, ê²°ê³¼ ë¦¬í„´

    let f = match f {
        Ok(file) => file,  // ì„±ê³µì ìœ¼ë¡œ íŒŒì¼ì´ ì—´ë¦´ ì‹œ file ë¦¬í„´
        Err(ref error) if error.kind() == ErrorKind::NotFound => {  // ErrorKind::NotFound variant ì‚¬ìš©ë¨
            match File::create("hello.txt") {  // íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° hello.txt íŒŒì¼ ìƒì„±
                Ok(fc) => fc,  // íŒŒì¼ ì„±ê³µì ìœ¼ë¡œ ìƒì„± ì‹œ fc ë°˜í™˜
                Err(e) => {  // ì˜¤ë¥˜ ë°œìƒ ì‹œ íŒ¨ë‹‰ ë§¤í¬ë¡œì™€ í•¨ê»˜ ì¢…ë£Œë¨
                    panic!(
                        "Tried to create file but there was a problem: {:?}",
                        e
                    )
                },
            }
        },
        Err(error) => {  // íŒŒì¼ ì—´ ë•Œ ì˜¤ë¥˜ ë°œìƒ ì‹œ íŒ¨ë‹‰ ë§¤í¬ë¡œì™€ í•¨ê»˜ ì¢…ë£Œ
            panic!(
                "There was a problem opening the file: {:?}",
                error
            )
        },
    };
}
```
* ```io::Error```
    * í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” êµ¬ì¡°ì²´
    * ```kind``` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ```io::ErrorKind``` ê°’ì„ ì–»ìŒ
    * ```io::ErrorKind```: ```io``` ì—°ì‚°ìœ¼ë¡œë¶€í„° ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ì¢…ë¥˜ì˜ ì—ëŸ¬ë¥¼ í‘œí˜„í•˜ëŠ” variantë¥¼ ê°€ì§„ ì—´ê±°í˜•
* *match guard*: ì¡°ê±´ë¬¸ ```if error.kind() == ErrorKind::NotFound```
    * ì¶”ê°€ ì¡°ê±´ë¬¸ ì—­í• 
    * ```match``` íŒ¨í„´ì—ì„œ ```ref```ì„ ì‚¬ìš©í•˜ì—¬ ```error```ì˜ ì†Œìœ ê¶Œì´ ê°€ë“œ ì¡°ê±´ë¬¸ìœ¼ë¡œ ì´ë™ë˜ì§€ ì•Šê³  ì°¸ì¡°ë§Œ ë˜ë„ë¡ í•¨!!
    * ```ref```ëŠ” ê°’ì„ ë§¤ì¹˜í•˜ì—¬ ê·¸ ì°¸ì¡°ìë¥¼ ì œê³µí•¨ (```&```ëŠ” ì°¸ì¡°ìë¥¼ ë§¤ì¹˜í•˜ê³  ê·¸ ê°’ ì œê³µ)
<br>

### ```unwrap```ê³¼ ```expect```
match êµ¬ë¬¸ê³¼ ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ëŠ” ```unwrap``` ë©”ì†Œë“œ
* ```Result``` ê°’ìœ¼ë¡œ ```Ok``` ë˜ëŠ” ```Err```ì„ ë¦¬í„´
<br>

```rust
let f = File::open("hello.txt").unwrap();
```
<br><br>

```expect``` ë©”ì†Œë“œ
* ì—ëŸ¬ ë©”ì‹œì§€ì˜ ë‚´ìš©ì„ ì„¤ì •í•  ìˆ˜ ìˆì–´, íŒ¨ë‹‰ ë©”ì‹œì§€ë¥¼ íŒŒì•…í•˜ê¸° ì‰¬ì›Œì§
* unwrapì—ëŠ” ë¬¸ìì—´ì´ ì•ˆ ë“¤ì–´ê°
<br>

```rust
let f = File::open("hello.txt").expect("Failed to open hello.txt");
```
  
<br>

## 3. To panic!ğŸ¤¯ or Not to panic!ğŸ¤“
â”Œ ```panic!``` ì‚¬ìš© â†’ ì½”ë“œê°€ ë³µêµ¬ ë¶ˆê°€í•¨ì„ ì¸ì •í•˜ëŠ” ê²ƒ<br>
â”‚<Br>
â”” ```Result``` ì‚¬ìš© â†’ ë°”ë¡œ ì½”ë“œì˜ ë³µêµ¬ ê°€ëŠ¥ì„±ì„ ë”°ì§€ê¸°ë³´ë‹¤ëŠ”, ì˜µì…˜ì„ ì œê³µí•˜ëŠ” ê²ƒ
<br>
